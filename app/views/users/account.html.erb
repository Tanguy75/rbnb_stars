<div class="row">
  <!-- encart photo et infos -->
  <div class="col-lg-4 ">
    <div class="user">
      <div class="user-infos flex-column justify-content-center align-items-center mt-5 p-5">
        <ul class="rounded bg-light shadow-sm py-5">
          <li class="my-3"><%= @user.username %></li>
          <li class="my-3"><%= @user.first_name %></li>
          <li class="my-3"><%= @user.last_name %></li>
          <li class="my-3"><%= @user.email %></li>
          <li class="my-3">Member since <%= @user.created_at %></li>
          <li>
            <%= link_to "Edit", edit_user_registration_path, class: "btn btn-primary mt-5" %>
          </li>
        </ul>
      </div>
      <%= image_tag @user.photo, alt: "alttext", class: "big-avatar img-profile" %>
    </div>
  </div>
  <!-- encart your bookings -->
  <div class="col-lg-8 mt-5 py-5">
    <div class="bg-light rounded mr-5 p-5 shadow-sm bookings">
      <!-- upcoming -->
      <h1>Your upcoming bookings</h1>
      <% @user.bookings.each do |booking| %>
        <% if booking.start_date > Time.now %>
          <div class="rouded border mt-1 rounded shadow-sm profile-part-info d-flex justify-content-between align-items-center">
            <div class="profile-part-info-left d-flex justify-content-start align-items-center">
              <%= image_tag booking.star_part.photo, alt: "alttext" %>
              <div class="profil-part-info-text">
                <h2><%= booking.star_part.name_of_star %>'s <%= booking.star_part.name_of_part %></h2>
                <h3>From <%= booking.start_date %> - To <%= booking.end_date %></h3>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
      <!-- passed -->
      <h1>Your previous bookings</h1>
      <% @user.bookings.each do |booking| %>
        <% if booking.start_date < Time.now %>
          <div class="rouded border mt-1 rounded shadow-sm profile-part-info d-flex justify-content-between align-items-center">
            <div class="profile-part-info-left d-flex justify-content-start align-items-center">
              <%= image_tag "https://images.unsplash.com/photo-1573496267526-08a69e46a409?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1949&q=80", alt: "alttext" %>
              <div class="profil-part-info-text">
                <h2><%= booking.star_part.name_of_star %>'s <%= booking.star_part.name_of_part %></h2>
                <h3>From <%= booking.start_date %> - To <%= booking.end_date %></h3>
              </div>
            </div>
            <%= link_to "leave a review", "#", class: "btn btn-primary mr-3"  %>
            <button type="button" class="btn btn-success mr-3" data-toggle="modal" data-target="#exampleModal">
              Book Again
            </button>

            <!-- Modal -->

            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                        <%= simple_form_for [booking.star_part, Booking.new] do |f| %>
                        <%= f.input :start_date, as: :string, required: false, input_html: {class: "datepicker"} %>
                        <%= f.input :end_date, as: :string, required: false, input_html: {class: "datepicker"} %>
                        <%= f.submit class: "btn btn-success"%>
                        <% end %>

                        <% booking.star_part.unavailable_dates.each do |date|%>
                          <div class="unavailable-dates" data-unavailable=<%= date %>></div>
                        <% end %>

                  </div>
                </div>
              </div>
            </div>

            <!-- end of modal -->

          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<div class="row px-5 mt-1 mx-0">
  <div class="col-lg-12 bg-light rounded shadow-sm p-5">
    <h1 class="mb-3">Your parts</h1>
      <div class="cards">
        <% @user.star_parts.each do |part| %>
        <div class="card-trip">
          <%= cl_image_tag part.photo.key, crop: :fill %>
          <div class="card-trip-infos">
          <div>
            <small>
              <% count = 0 %>
              <% part.rating.times do %>
                <% if part.rating > count %>
                  <i class="fa fa-star"></i>
                <% else %>
                  <i class="fa fa-star"></i>
                <% end %>
                <% count += 1 %>
              <% end %>
            </small>
            <h5><%= part.name_of_part.capitalize() %></h5>
            <h6>From: <strong><%= part.name_of_star %></strong></h6>
          </div>
        <h2 class="card-trip-pricing"> â‚¬ <%= part.price  %> </h2>
        <%= cl_image_tag @user.photo.key, class: "card-trip-user avatar-bordered" %>
      </div>
  </div>
<% end %>

  </div>
</div>
